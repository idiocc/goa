<types namespace="_goa">
  <import from="http" name="IncomingMessage" desc="The first argument to the 'request' event." link="https://nodejs.org/api/http.html#http_class_http_incomingmessage" />
  <import from="http" name="ServerResponse" desc="The second parameter to the 'request' event." link="https://nodejs.org/api/http.html#http_response_socket" />

  <import from="net" name="Socket" desc="The socket underlying the request." link="https://nodejs.org/api/net.html#net_class_net_socket" />

  <import from="url" name="URL" desc="Browser-compatible URL class, implemented by following the `WHATWG` URL Standard." link="https://nodejs.org/api/url.html#url_class_url" />

  <import from=".." ns="_goa" name="Accepts" desc="The _Accepts_ API." link="https://github.com/idiocc/accepts/wiki/Accepts#type-_goaaccepts" />
  <import from=".." ns="_goa" name="Application" desc="The application interface." link="Application#type-_goaapplication" />
  <import from=".." ns="_goa" name="Context" desc="The context object." link="Context#type-_goacontext" />
  <import from=".." ns="_goa" name="Response" desc="The response object." link="Response#type-_goaresponse" />

  <type interface name="ContextDelegatedRequest" desc="The request API available via Context.">
    <prop type="function((!Array<string>|string)=, ...string): (string|!Array<string>|boolean)" name="acceptsLanguages">
      Return accepted languages or best fit based on `langs`. Given `Accept-Language: en;q=0.8, es, pt` an array sorted by quality is returned: `['es', 'pt', 'en']`.
    </prop>
    <prop type="function((!Array<string>|string)=, ...string): (string|!Array<string>|boolean)" name="acceptsEncodings">
      Return accepted encodings or best fit based on `encodings`. Given `Accept-Encoding: gzip, deflate` an array sorted by quality is returned: `['gzip', 'deflate']`.
    </prop>
    <prop type="function((!Array<string>|string)=, ...string): (string|!Array<string>|boolean)" name="acceptsCharsets">
      Return accepted charsets or best fit based on `charsets`. Given `Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5` an array sorted by quality is returned: `['utf-8', 'utf-7', 'iso-8859-1']`.
    </prop>
    <prop type="function((!Array<string>|string)=, ...string): (string|!Array<string>|boolean)" name="accepts">
      Check if the given `type(s)` is acceptable, returning the best match when true, otherwise `false`, in which case you should respond with 406 "Not Acceptable".

      The `type` value may be a single mime type string such as "application/json", the extension name such as "json" or an array `["json", "html", "text/plain"]`. When a list or array is given the _best_ match, if any is returned. When no types are given as arguments, returns all types accepted by the client in the preference order.

      _Examples_:

      - Accept: text/html

          ```js
          this.types('html') => "html"
          ```
      - Accept: text/＊, application/json

          ```js
          this.types('html') => "html"
          this.types('text/html') => "text/html"
          this.types('json', 'text') => "json"
          this.types('application/json') => "application/json"
          ```
      - Accept: text/＊, application/json

          ```js
          this.types('image/png') => false
          this.types('png') => false
          ```
      - Accept: text/＊;q=.5, application/json

          ```js
          this.types(['html', 'json']) => "json"
          this.types('html', 'json') => "json"
          ```
      - Accept: application/＊;q=0.2, image/jpeg;q=0.8, text/html, text/plain

          ```js
          this.types() => ["text/html", "text/plain",
            "image/jpeg", "application/＊"]
          ```
    </prop>
    <prop type="function(string): string" name="get">
      Return request header. The `Referrer` header field is special-cased, both `Referrer` and `Referer` are interchangeable.

      _Examples_:

      ```js
      this.get('Content-Type') => "text/plain"
      this.get('content-type') => "text/plain"
      this.get('Something') => undefined
      ```
    </prop>
    <prop type="function(((!Array<string>|string)), ...string): ?(string|boolean)" name="is">
      Check if the incoming request contains the "Content-Type" header field, and it contains any of the give mime `type`s. If there is no request body, `null` is returned. If there is no content type, `false` is returned. Otherwise, it returns the first `type` that matches.

      _Examples_:

      - With Content-Type: text/html; charset=utf-8

          ```js
          this.is('html'); // => 'html'
          this.is('text/html'); // => 'text/html'
          this.is('text/*', 'application/json');
            // => 'text/html'
          ```
      - When Content-Type is application/json

          ```js
          this.is('json', 'urlencoded'); // => 'json'
          this.is('application/json'); // => 'application/json'
          this.is('html', 'application/*');
                    // => 'application/json'
          this.is('html'); // => false
          ```
    </prop>
    <prop string name="querystring">
      Get/Set query string.
    </prop>
    <prop boolean name="idempotent">
      Check if the request is idempotent.
    </prop>
    <prop type="net.Socket" name="socket">
      Return the request socket.
    </prop>
    <prop string name="search">
      Get the search string. Same as the querystring except it includes the leading ?. Set the search string. Same as `response.querystring=` but included for ubiquity.
    </prop>
    <prop string name="method">
      Get/Set request method.
    </prop>
    <prop type="!Object|string" name="query">
      Get parsed query-string. Set query-string as an object.
    </prop>
    <prop string name="path">
      Get request pathname. Set pathname, retaining the query-string when present.
    </prop>
    <prop string name="url">
      Get/Set request URL.
    </prop>
    <prop type="_goa.Accepts" name="accept">
      Get accept object. Lazily memoized.
    </prop>
    <prop string name="origin">
      Get origin of URL.
    </prop>
    <prop string name="href">
      Get full request URL.
    </prop>
    <prop type="!Array<string>" name="subdomains">
      Return subdomains as an array.
      Subdomains are the dot-separated parts of the host before the main domain of the app. By default, the domain of the app is assumed to be the last two parts of the host. This can be changed by setting `app.subdomainOffset`. For example, if the domain is "tobi.ferrets.example.com":
      - If `app.subdomainOffset` is not set, this.subdomains is `["ferrets", "tobi"]`.
      - If `app.subdomainOffset` is 3, this.subdomains is `["tobi"]`.
    </prop>
    <prop string name="protocol">
      Return the protocol string "http" or "https" when requested with TLS. When the proxy setting is enabled the "X-Forwarded-Proto" header is enabled the "X-Forwarded-Proto" header a reverse proxy that supplies https for you this may be enabled.
    </prop>
    <prop string name="host">
      Parse the "Host" header field host and support X-Forwarded-Host when a proxy is enabled.
    </prop>
    <prop string name="hostname">
      Parse the "Host" header field hostname and support X-Forwarded-Host when a proxy is enabled.
    </prop>
    <prop type="url.URL|Object" name="URL">
      Get WHATWG parsed URL object.
    </prop>
    <prop type="!Object<string, string>" name="header">
      Return request header.
    </prop>
    <prop type="!Object<string, string>" name="headers">
      Return request header, alias as `request.header`.
    </prop>
    <prop boolean name="secure">
      Short-hand for: `this.protocol == 'https'`.
    </prop>
    <prop boolean name="stale">
      Check if the request is stale, aka "Last-Modified" and / or the "ETag" for the resource has changed.
    </prop>
    <prop boolean name="fresh">
      Check if the request is fresh, aka Last-Modified and/or the ETag still match.
    </prop>
    <prop type="!Array<string>" name="ips">
      When `app.proxy` is `true`, parse the "X-Forwarded-For" ip address list. For example if the value were "client, proxy1, proxy2" you would receive the array `["client", "proxy1", "proxy2"]` where "proxy2" is the furthest down-stream.
    </prop>
    <prop string name="ip">
      Request remote address. Supports X-Forwarded-For when app.proxy is true.
    </prop>
  </type>

  <type interface extends="_goa.ContextDelegatedRequest" name="BaseRequest"
    desc="The additional API not available via Context.">
    <prop opt string name="charset">
      Get the charset when present or undefined.
    </prop>
    <prop type="?number" name="length">
      Return parsed Content-Length when present.
    </prop>
    <prop opt string name="type">
      Return the request mime type void of parameters such as "charset".
    </prop>
  </type>

  <type interface extends="_goa.BaseRequest" name="Request" desc="The request object.">
    <prop type="!_goa.Application" name="app">
      The reference to the application.
    </prop>
    <prop type="!_goa.Context" name="ctx">
      The reference to the context instance.
    </prop>
    <prop type="!_goa.Response" name="response">
      The reference to the request instance.
    </prop>
    <prop type="!http.IncomingMessage" name="req">
      The message from the client.
    </prop>
    <prop type="!http.ServerResponse" name="res">
      The response from the server.
    </prop>
    <prop opt string name="originalUrl">
      The original url set by the `parseurl` package.
    </prop>
  </type>
</types>